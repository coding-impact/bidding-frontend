import{d as N,r as t,o as B,c as V,w as a,a as T,b as y,e,f as U,g as v,t as u,u as w,h as l,i as F}from"./index-BUrf3bi7.js";import{f as M,V as j,a as q,b as p,c as C,_ as A,d as D,e as $,g as h,h as z,r as E,i as G,p as H}from"./VTextField-CpaGo0PA.js";const J=l("td",null," 編號 ",-1),K=l("td",null,"驗證碼",-1),L=l("td",null,"下標金額",-1),R=N({__name:"index",setup(O){const r=t(),d=t(!1),c=t(!1),m=t(),i=t(1e3),o=t(),f=t(),b=t(),g=t();async function S(x){d.value=!0,(await x).valid&&(o.value=await H("/bidding",{name:m.value,bidding:Number(i.value)}),o.value.type=="success"&&(localStorage.setItem("index",o.value.data.index),localStorage.setItem("verificationCode",o.value.data.verificationCode),localStorage.setItem("bidded",i.value.toString()),await _())),d.value=!1}async function _(){f.value=localStorage.getItem("index"),b.value=localStorage.getItem("verificationCode"),g.value=localStorage.getItem("bidded")}async function k(){await _(),r.value=(await M("/text")).data}return B(k),(x,n)=>{const I=T("router-link");return y(),V(j,{class:"d-flex text-center justify-center align-center h-100 flex-column"},{default:a(()=>[e(h,{title:"競標籌碼",subtitle:"籌碼至上主義教室",style:{"max-width":"100%",width:"500px"},class:"mb-4"},{default:a(()=>[e(q,{onSubmit:U(S,["prevent"]),"validate-on":"input",modelValue:c.value,"onUpdate:modelValue":n[2]||(n[2]=s=>c.value=s)},{default:a(()=>[e(p,null,{default:a(()=>[v(u(r.value?r.value:"當競標時間結束時，出價最高者將可得到點數。"),1)]),_:1}),e(p,{class:"pb-0"},{default:a(()=>[e(C,{loading:d.value,disabled:d.value,modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=s=>m.value=s),"append-inner-icon":"mdi-account",rules:[w(E)],label:"姓名",placeholder:"請務必填寫真實姓名",variant:"solo-filled",flat:""},null,8,["loading","disabled","modelValue","rules"]),e(C,{loading:d.value,disabled:d.value,modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=s=>i.value=s),"append-inner-icon":"mdi-currency-usd",rules:[w(G)],step:500,label:"競標金額",type:"number",variant:"solo-filled",flat:""},null,8,["loading","disabled","modelValue","rules"]),e(A,{res:o.value},null,8,["res"])]),_:1}),e(D,{class:"px-4 pb-4"},{default:a(()=>[e($,{type:"submit",block:"",flat:"",loading:d.value,disabled:!c.value},{default:a(()=>[v("送出")]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),f.value?(y(),V(h,{key:0,title:"紀錄",subtitle:"上次的競標資訊會記錄在這邊",style:{"max-width":"100%",width:"500px"},class:"mb-4"},{default:a(()=>[e(p,null,{default:a(()=>[e(z,{density:"compact"},{default:a(()=>[l("tbody",null,[l("tr",null,[J,l("td",null,u(f.value),1)]),l("tr",null,[K,l("td",null,u(b.value),1)]),l("tr",null,[L,l("td",null,u(g.value),1)])])]),_:1})]),_:1})]),_:1})):F("",!0),e(I,{to:"admin",class:"text-caption text-grey"},{default:a(()=>[v("點此前往管理員頁面")]),_:1})]),_:1})}}});export{R as default};
